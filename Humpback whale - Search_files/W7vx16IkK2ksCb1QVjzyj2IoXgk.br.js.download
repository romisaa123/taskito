var SpotlightAjax;(function(n){function ut(n){try{i=JSON.parse(n);i.ImgCarScroll!==undefined&&(h=parseInt(i.ImgCarScroll));i.ImgCarIndex!==undefined&&(c=parseInt(i.ImgCarIndex));i.ShowChevronOnLoad!==undefined&&(b=i.ShowChevronOnLoad)}catch(t){}}function ft(){var r=_d.querySelectorAll(".btsl-image-card"),i,n,t;for(a=r.length,n=0;n<a;n++)t=r[n],t&&sj_be(t,"click",ot);for(i=_d.querySelectorAll(".slide"),n=0;n<i.length;n++)t=i[n],t&&sj_be(t,"focus",st);d();k()}function t(n){if(_w.si_ct&&typeof _w.si_ct=="function"){var t=_ge(n);t&&_w.si_ct(t)}}function k(){var t=_qs(".hidercta"),n;t&&sj_be(t,"click",nt);n=_qs("#fullpage");n&&sj_be(n,"click",nt);window.addEventListener("keydown",et)}function d(){var t=_d.querySelector("#lft-chevr-nf"),n;t&&sj_be(t,"click",it);n=_d.querySelector("#rt-chevr-nf");n&&sj_be(n,"click",it)}function y(n){var t=_qs("#fullpage");if(t){var r=t.getAttribute("data-url"),u=e(r),i=new URL(u);i.searchParams.set("carindeximg",n.toString());t.setAttribute("data-url",i.toString())}}function g(n,t,i){var f=t?"none":"block",e,o,s,r,h,u,a;if(t&&(_w&&_w.spotlightLazyLoadInfo&&c!==undefined&&(_w.spotlightLazyLoadInfo.ImageCarouselIndex=c),typeof Hider!="undefined"&&Hider.setIsImageCarouselFullScreenAjax(!0)),e=_qs("#b_header"),e!=null&&(e.style.display=f),o=_qs("#b_footer"),o!=null&&(o.style.display=f),s=_qs("#spotlight-main-page"),s!=null&&(s.style.display=f),r=_qs("#spotlight-fullscreen-page"),r&&(t?(typeof sj_appHTML!="undefined"&&sj_appHTML(r,n),typeof Hider!="undefined"&&(Hider.Init(),Hider.setUrl(i))):r.innerHTML=""),t){for(h=_d.querySelectorAll(".btslv2-close-btn-wrapper"),u=0;u<h.length;u++)sj_be(h[u],"click",p);a=_qs(".fullpage-fs");a&&sj_be(a,"click",p);l=!0}}function p(n){var c,a,p,i,v;r||(c=n.currentTarget,c!=null&&(i=-1,n.type=="keydown"?(v=_qs(".fullpage-fs"),v&&(a=v.getAttribute("data-url"),p=v.getAttribute("data-inframeurl"),i=parseInt(v.getAttribute("data-index")),t("btsf_click2back"))):(a=c.getAttribute("data-url"),c.classList.contains("fullpage-fs")?t("btsf_click2back"):t("btsf_close"),p=c.getAttribute("data-inframeurl"),i=parseInt(c.getAttribute("data-index"))),p&&f(p),a&&typeof sj_ajax!="undefined"&&(i!=-1&&(u=i,s(i,!1),o(i),y(i)),g("",!1,a),r=!0,sj_ajax(e(a),{callback:function(n,t){try{n&&typeof sj_appHTML!="undefined"?(w(t.request.responseText),l=!1,typeof PageInitializeScroll!="undefined"&&PageInitializeScroll.scrollCarouselTo(h),typeof Hider!="undefined"&&Hider.setIsImageCarouselFullScreenAjax(!1)):typeof Log!="undefined"&&typeof Log.Log!="undefined"&&Log.Log("AjaxRequestFailed","CloseButtonClick","Spotlight",!0)}catch(i){}r=!1},timeout:6e4}))))}function f(n){var t=_qs(".sptdsq");t&&(t.src=n)}function w(n){var u=_qs(".mmaAdContainer"),t=_qs("#spotlight-imgcar-fetch"),i,r;t&&(t.innerHTML="",typeof sj_appHTML!="undefined"&&sj_appHTML(t,n));i=_qs(".mmaAdCardComp");i&&typeof MMAAdMVLogging!="undefined"&&MMAAdMVLogging.Init();i||u&&(r=_qs(".mmaAdContainer"),r&&(r.innerHTML=u.innerHTML));typeof SpotlightL2Chevron!="undefined"&&SpotlightL2Chevron.init(!1,b,!0);typeof SpotlightInstrumentationV2!="undefined"&&SpotlightInstrumentationV2.init(!1);d();k()}function et(n){var h,u,c,o,i,s,e;r||(h=_qs("#sb_form_q"),n.target!=h)&&(l||n.key!="f"&&n.key!="F"||(u=_qs(".hidercta"),u&&(c=u.getAttribute("data-url"),o=u.getAttribute("data-inframeurl"),o&&f(o),t("viewfullscreen"),i=_d.createElement("div"),i.classList.add("loader-container"),s=_d.createElement("div"),s.classList.add("loader"),i.appendChild(s),e=_qs("#fullpage"),e&&e.appendChild(i),tt(e,c,i))))}function nt(n){var u,h,o,i,s,e;r||(u=n.currentTarget,u&&(h=u.getAttribute("data-url"),o=u.getAttribute("data-inframeurl"),o&&f(o),t("viewfullscreen"),i=_d.createElement("div"),i.classList.add("loader-container"),s=_d.createElement("div"),s.classList.add("loader"),i.appendChild(s),e=_qs("#fullpage"),e&&e.appendChild(i),tt(e,h,i)))}function tt(n,t,i){t&&typeof sj_ajax!="undefined"&&(r=!0,sj_ajax(e(t),{callback:function(u,f){try{u?(g(f.request.responseText,!0,t),n&&n.removeChild(i)):typeof Log!="undefined"&&typeof Log.Log!="undefined"&&Log.Log("AjaxRequestFailed","FullScreenClicked","Spotlight",!0)}catch(e){}r=!1},timeout:6e4}))}function it(n){var h=n.currentTarget,k,i,d,c,r,l,p,b;if(h){if(k=h.id==="rt-chevr-nf",i=parseInt(h.getAttribute("data-index")),i==-1)return;k?(i++,t("rightchevronclickl2")):(i--,t("leftchevronclickl2"));h.setAttribute("data-index",i.toString());u=i;d=h.getAttribute("data-url");c=e(d);c&&(r=new URL(c),l=_ge("rt-chevr-nf"),l&&(i+1>=a?l.classList.add("b_hide"):l.classList.remove("b_hide"),r.searchParams.set("carindeximg",(i+1).toString()),r.searchParams.set("carscrlimgv2",((i+1)*v).toString()),l.setAttribute("data-url",r.toString())),p=_ge("lft-chevr-nf"),p&&(i-1<0?p.classList.add("b_hide"):(p.classList.remove("b_hide"),r.searchParams.set("carindeximg",(i-1).toString()),r.searchParams.set("carscrlimgv2",((i-1)*v).toString()),p.setAttribute("data-url",r.toString()))));y(i);b=h.getAttribute("data-inframeurl");b&&f(b);c&&sj_ajax&&(s(i,!0),o(i),typeof PageInitializeScroll!="undefined"&&PageInitializeScroll.scrollCarouselTo(i*v),sj_ajax(c,{callback:function(n,t){if(u===i)try{n&&typeof sj_appHTML!="undefined"?w(t.request.responseText):typeof Log!="undefined"&&typeof Log.Log!="undefined"&&Log.Log("AjaxRequestFailed","ChevElementClick","Spotlight",!0)}catch(r){}},timeout:6e4}))}}function ot(n){var r=n.currentTarget,h,e,i;if(r!=null){if(r.classList.contains("active"))return;h=r.getAttribute("data-url");e=r.getAttribute("data-inframeurl");e&&f(e);i=parseInt(r.getAttribute("data-index"));u=i;s(i,!0);o(i);t("btsic_slide"+i);rt(h,i)}}function st(n){var c,i,l,e,r;if(n.type=="focus"&&(c=n.currentTarget,i=c.querySelector(".btsl-image-card"),i!=null)){if(i.classList.contains("active"))return;l=i.getAttribute("data-url");e=i.getAttribute("data-inframeurl");e&&f(e);r=parseInt(i.getAttribute("data-index"));u=r;s(r,!0);o(r);t("btsic_slide"+r);rt(l,r);typeof PageInitializeScroll!="undefined"&&PageInitializeScroll.scrollCarouselTo(h)}}function rt(n,t){y(t);n&&typeof sj_ajax!="undefined"&&sj_ajax(e(n),{callback:function(n,i){if(u===t)try{n&&typeof sj_appHTML!="undefined"?w(i.request.responseText):typeof Log!="undefined"&&typeof Log.Log!="undefined"&&Log.Log("AjaxRequestFailed","ImageCarouselClick","Spotlight",!0)}catch(r){}},timeout:6e4})}function o(n){var f=_d.querySelectorAll(".slide"),t=_qs(".btsl-active"),i,r,u;t&&t.classList.remove("btsl-active");i=_qs(".btsl-image-card.active",t);i&&i.classList.remove("active");n<f.length&&(r=f[n],r&&(u=_qs(".btsl-image-card",r),u&&(u.classList.add("active"),typeof ImageDescriptionV2!="undefined"&&ImageDescriptionV2.Init(0,"",!0))))}function s(n,t){var i,r;_w&&_w.spotlightLazyLoadInfo&&_w.spotlightLazyLoadInfo.FullScreenUrls[n]!=undefined&&(i=_ge("bcg-img-url"),i&&(r=new Image,t?(r.src=_w.spotlightLazyLoadInfo.FullScreenUrls[n],r.alt=_w.spotlightLazyLoadInfo.HeadingTexts[n],r.onload=function(){var t=_d.createElement("div"),n;t.ariaHidden="true";t.classList.add("wallpaperOverlay","wallpaper-transition_nwp");t.style.backgroundImage="url(".concat(r.src,")");n=_d.createElement("div");n.ariaHidden="true";n.classList.add("wallpaperOverlay","wallpaper-transition_cwp");n.style.backgroundImage=i.style.backgroundImage;i.appendChild(t);i.appendChild(n);n.addEventListener("animationend",function(){i.style.backgroundImage="url(".concat(r.src,")");i.removeChild(t);i.removeChild(n)})}):(r.src=_w.spotlightLazyLoadInfo.FullScreenUrls[n],r.onload=function(){i.style.backgroundImage="url(".concat(r.src,")")})))}function e(n){var i=new DOMParser,r=i.parseFromString(n,"text/html"),t=r.documentElement.textContent,u=_d.querySelector(".mmaAdCardComp");return u&&t.indexOf("&mmaAd=true")===-1&&(t=t.concat("&mmaAd=true")),t}var i,h,c,b,l=!1,r=!1,u=0,a=0,v=188;n.LoadAjaxParams=ut;n.fullScreenExited=p;ft()})(SpotlightAjax||(SpotlightAjax={}))